{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["URL_PREFIX_KEY","BITLY_TOKEN_KEY","App","useState","urlPrefix","setUrlPrefixState","bitlyToken","setBitlyTokenState","inputUrl","setInputUrlState","targetUrl","setTargetUrl","isValidHttpUrl","string","url","URL","_","protocol","serialize","obj","str","p","hasOwnProperty","push","encodeURIComponent","join","generateNow","a","d","validUrl","fetch","method","mode","cache","headers","redirect","referrerPolicy","body","JSON","stringify","domain","long_url","response","json","data","navigator","clipboard","writeText","link","useEffect","localStorage","getItem","className","value","onChange","e","target","setItem","type","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.978bb3ae.chunk.js","sourcesContent":["\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\n\nconst URL_PREFIX_KEY = \"url_prefix\";\nconst BITLY_TOKEN_KEY = \"bitly_token\";\n\nfunction App() {\n\n  const [urlPrefix, setUrlPrefixState] = useState(\"\");\n  const [bitlyToken, setBitlyTokenState] = useState(\"\");\n  const [inputUrl, setInputUrlState] = useState(\"\");\n  const [targetUrl, setTargetUrl] = useState(\"\");\n\n  const setInputUrl = e => {\n    setInputUrlState(e.target.value);\n  };\n  const setUrlPrefix = e => {\n    setUrlPrefixState(e.target.value);\n    localStorage.setItem(URL_PREFIX_KEY, e.target.value);\n  };\n\n  const setBitlyToken = e => {\n    setBitlyTokenState(e.target.value);\n    localStorage.setItem(BITLY_TOKEN_KEY, e.target.value);\n  };\n\n  const isValidHttpUrl = (string) => {\n    let url;\n\n    try {\n      url = new URL(string);\n    } catch (_) {\n      return false;\n    }\n\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\n  };\n\n  const serialize = (obj) => {\n    var str = [];\n    for (var p in obj)\n      if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n    return str.join(\"&\");\n  };\n\n  const generateNow = async () => {\n    // const text = await navigator.clipboard.readText();\n\n    if (!isValidHttpUrl(inputUrl)) {\n      return;\n    }\n\n    // const response = await fetch(inputUrl, {\n    //   mode: 'no-cors'\n    // });\n\n    // const text = await response.text();\n    // console.log(text);\n\n    const d = {\n      url: inputUrl\n    };\n    const validUrl = `${urlPrefix}?${serialize(d)}`;\n\n    if (validUrl) {\n      const response = await fetch('https://api-ssl.bitly.com/v4/shorten', {\n        method: \"POST\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${bitlyToken}`\n        },\n        redirect: \"follow\",\n        referrerPolicy: \"no-referrer\",\n        body: JSON.stringify({\n          domain: \"bit.ly\",\n          long_url: validUrl\n        })\n      });\n\n      const data = await response.json();\n      await navigator.clipboard.writeText(data.link);\n      setTargetUrl(data.link);\n\n    };\n\n  };\n\n  useEffect(() => {\n    setUrlPrefixState(localStorage.getItem(URL_PREFIX_KEY) || \"\");\n    setBitlyTokenState(localStorage.getItem(BITLY_TOKEN_KEY) || \"\");\n  }, []);\n\n  return (\n    <div className=\"container-fluid w-100\">\n      <div className=\"container-fluid bg-primary mb-3 text-white text-center h1 py-3\">\n        Utility for Lazada Retailers\n      </div>\n      <div className=\"container\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"card-title\">\n              URL ของคุณ\n            </div>\n            <div className=\"card-subtitle mb-2 text-muted\">\n              ตัวอย่าง https://c.lazada.co.th/t/xxxxxxx\n            </div>\n            <input className=\"form-control\" value={urlPrefix} onChange={setUrlPrefix} />\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\"card-title\">\n              Bitly Token\n            </div>\n            <div className=\"card-subtitle mb-2 text-muted\">\n              Token นี้จะเป็นตัวอักษรยาวๆ ใช้เพื่อสร้าง short url ให้อัตโนมัติ\n            </div>\n            <input type=\"text\" className=\"form-control\" value={bitlyToken} onChange={setBitlyToken} />\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-body\">\n\n            <div className=\"card-title\">\n              วาง URL จาก web lazada\n            </div>\n\n            <input type=\"text\" className=\"form-control\" value={inputUrl} onChange={setInputUrl} />\n\n            <button className=\"form-control mt-3\" onClick={generateNow}>สร้าง link</button>\n\n\n            <input type=\"text\" className={`form-control mt-3`} value={targetUrl} onChange={() => { }} />\n            {/* <div className={`container text-center mt-3 ${targetUrl === '' ? 'd-none' : ''} `}>{targetUrl}</div> */}\n          </div>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n\nexport default App;;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}